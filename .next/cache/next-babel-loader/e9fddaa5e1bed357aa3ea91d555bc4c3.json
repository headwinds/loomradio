{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/braflow/loomradio/src/Preview.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nvar ICON_SIZE = '64px';\n\nvar Preview = /*#__PURE__*/function (_Component) {\n  _inherits(Preview, _Component);\n\n  var _super = _createSuper(Preview);\n\n  function Preview() {\n    var _this;\n\n    _classCallCheck(this, Preview);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      image: null\n    });\n\n    return _this;\n  }\n\n  _createClass(Preview, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.fetchImage(this.props);\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (this.props.url !== nextProps.url) {\n        this.fetchImage(nextProps);\n      }\n    }\n  }, {\n    key: \"fetchImage\",\n    value: function fetchImage(_ref) {\n      var _this2 = this;\n\n      var url = _ref.url,\n          light = _ref.light;\n\n      if (typeof light === 'string') {\n        this.setState({\n          image: light\n        });\n        return;\n      }\n\n      this.setState({\n        image: null\n      });\n      return window.fetch(\"https://noembed.com/embed?url=\".concat(url)).then(function (response) {\n        return response.json();\n      }).then(function (data) {\n        if (data.thumbnail_url) {\n          var image = data.thumbnail_url.replace('height=100', 'height=480');\n\n          _this2.setState({\n            image: image\n          });\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var onClick = this.props.onClick;\n      var image = this.state.image;\n      var flexCenter = {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center'\n      };\n      var styles = {\n        preview: _objectSpread({\n          width: '100%',\n          height: '100%',\n          backgroundImage: image ? \"url(\".concat(image, \")\") : undefined,\n          backgroundSize: 'cover',\n          backgroundPosition: 'center',\n          cursor: 'pointer'\n        }, flexCenter),\n        shadow: _objectSpread({\n          background: 'radial-gradient(rgb(0, 0, 0, 0.3), rgba(0, 0, 0, 0) 60%)',\n          borderRadius: ICON_SIZE,\n          width: ICON_SIZE,\n          height: ICON_SIZE\n        }, flexCenter),\n        playIcon: {\n          borderStyle: 'solid',\n          borderWidth: '16px 0 16px 26px',\n          borderColor: 'transparent transparent transparent white',\n          marginLeft: '7px'\n        }\n      };\n      return __jsx(\"div\", {\n        style: styles.preview,\n        className: \"react-player__preview\",\n        onClick: onClick,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 7\n        }\n      }, __jsx(\"div\", {\n        style: styles.shadow,\n        className: \"react-player__shadow\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 9\n        }\n      }, __jsx(\"div\", {\n        style: styles.playIcon,\n        className: \"react-player__play-icon\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }\n      })));\n    }\n  }]);\n\n  return Preview;\n}(Component);\n\nexport { Preview as default };","map":{"version":3,"sources":["/Users/braflow/loomradio/src/Preview.js"],"names":["React","Component","ICON_SIZE","Preview","image","fetchImage","props","nextProps","url","light","setState","window","fetch","then","response","json","data","thumbnail_url","replace","onClick","state","flexCenter","display","alignItems","justifyContent","styles","preview","width","height","backgroundImage","undefined","backgroundSize","backgroundPosition","cursor","shadow","background","borderRadius","playIcon","borderStyle","borderWidth","borderColor","marginLeft"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\n\nconst ICON_SIZE = '64px'\n\nexport default class Preview extends Component {\n  state = {\n    image: null\n  }\n  componentDidMount () {\n    this.fetchImage(this.props)\n  }\n  componentWillReceiveProps (nextProps) {\n    if (this.props.url !== nextProps.url) {\n      this.fetchImage(nextProps)\n    }\n  }\n  fetchImage ({ url, light }) {\n    if (typeof light === 'string') {\n      this.setState({ image: light })\n      return\n    }\n    this.setState({ image: null })\n    return window.fetch(`https://noembed.com/embed?url=${url}`)\n      .then(response => response.json())\n      .then(data => {\n        if (data.thumbnail_url) {\n          const image = data.thumbnail_url.replace('height=100', 'height=480')\n          this.setState({ image })\n        }\n      })\n  }\n  render () {\n    const { onClick } = this.props\n    const { image } = this.state\n    const flexCenter = {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center'\n    }\n    const styles = {\n      preview: {\n        width: '100%',\n        height: '100%',\n        backgroundImage: image ? `url(${image})` : undefined,\n        backgroundSize: 'cover',\n        backgroundPosition: 'center',\n        cursor: 'pointer',\n        ...flexCenter\n      },\n      shadow: {\n        background: 'radial-gradient(rgb(0, 0, 0, 0.3), rgba(0, 0, 0, 0) 60%)',\n        borderRadius: ICON_SIZE,\n        width: ICON_SIZE,\n        height: ICON_SIZE,\n        ...flexCenter\n      },\n      playIcon: {\n        borderStyle: 'solid',\n        borderWidth: '16px 0 16px 26px',\n        borderColor: 'transparent transparent transparent white',\n        marginLeft: '7px'\n      }\n    }\n    return (\n      <div style={styles.preview} className='react-player__preview' onClick={onClick}>\n        <div style={styles.shadow} className='react-player__shadow'>\n          <div style={styles.playIcon} className='react-player__play-icon' />\n        </div>\n      </div>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}