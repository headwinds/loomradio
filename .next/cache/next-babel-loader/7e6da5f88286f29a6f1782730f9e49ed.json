{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/braflow/loomradio/src/players/DailyMotion.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport { callPlayer, getSDK, parseStartTime } from '../utils';\nimport createSinglePlayer from '../singlePlayer';\nvar SDK_URL = 'https://api.dmcdn.net/all.js';\nvar SDK_GLOBAL = 'DM';\nvar SDK_GLOBAL_READY = 'dmAsyncInit';\nvar MATCH_URL = /^(?:(?:https?):)?(?:\\/\\/)?(?:www\\.)?(?:(?:dailymotion\\.com(?:\\/embed)?\\/video)|dai\\.ly)\\/([a-zA-Z0-9]+)(?:_[\\w_-]+)?$/;\nexport var DailyMotion = /*#__PURE__*/function (_Component) {\n  _inherits(DailyMotion, _Component);\n\n  var _super = _createSuper(DailyMotion);\n\n  function DailyMotion() {\n    var _this;\n\n    _classCallCheck(this, DailyMotion);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"callPlayer\", callPlayer);\n\n    _defineProperty(_assertThisInitialized(_this), \"onDurationChange\", function () {\n      var duration = _this.getDuration();\n\n      _this.props.onDuration(duration);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"mute\", function () {\n      _this.callPlayer('setMuted', true);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"unmute\", function () {\n      _this.callPlayer('setMuted', false);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"ref\", function (container) {\n      _this.container = container;\n    });\n\n    return _this;\n  }\n\n  _createClass(DailyMotion, [{\n    key: \"load\",\n    value: function load(url) {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          controls = _this$props.controls,\n          config = _this$props.config,\n          onError = _this$props.onError,\n          playing = _this$props.playing;\n\n      var _url$match = url.match(MATCH_URL),\n          _url$match2 = _slicedToArray(_url$match, 2),\n          id = _url$match2[1];\n\n      if (this.player) {\n        this.player.load(id, {\n          start: parseStartTime(url),\n          autoplay: playing\n        });\n        return;\n      }\n\n      getSDK(SDK_URL, SDK_GLOBAL, SDK_GLOBAL_READY, function (DM) {\n        return DM.player;\n      }).then(function (DM) {\n        if (!_this2.container) return;\n        var Player = DM.player;\n        _this2.player = new Player(_this2.container, {\n          width: '100%',\n          height: '100%',\n          video: id,\n          params: _objectSpread({\n            controls: controls,\n            autoplay: _this2.props.playing,\n            mute: _this2.props.muted,\n            start: parseStartTime(url),\n            origin: window.location.origin\n          }, config.dailymotion.params),\n          events: {\n            apiready: _this2.props.onReady,\n            seeked: function seeked() {\n              return _this2.props.onSeek(_this2.player.currentTime);\n            },\n            video_end: _this2.props.onEnded,\n            durationchange: _this2.onDurationChange,\n            pause: _this2.props.onPause,\n            playing: _this2.props.onPlay,\n            waiting: _this2.props.onBuffer,\n            error: function error(event) {\n              return onError(event);\n            }\n          }\n        });\n      }, onError);\n    }\n  }, {\n    key: \"play\",\n    value: function play() {\n      this.callPlayer('play');\n    }\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      this.callPlayer('pause');\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {// Nothing to do\n    }\n  }, {\n    key: \"seekTo\",\n    value: function seekTo(seconds) {\n      this.callPlayer('seek', seconds);\n    }\n  }, {\n    key: \"setVolume\",\n    value: function setVolume(fraction) {\n      this.callPlayer('setVolume', fraction);\n    }\n  }, {\n    key: \"getDuration\",\n    value: function getDuration() {\n      return this.player.duration || null;\n    }\n  }, {\n    key: \"getCurrentTime\",\n    value: function getCurrentTime() {\n      return this.player.currentTime;\n    }\n  }, {\n    key: \"getSecondsLoaded\",\n    value: function getSecondsLoaded() {\n      return this.player.bufferedTime;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var style = _objectSpread({\n        width: '100%',\n        height: '100%',\n        backgroundColor: 'black'\n      }, this.props.style);\n\n      return __jsx(\"div\", {\n        style: style,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 7\n        }\n      }, __jsx(\"div\", {\n        ref: this.ref,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 9\n        }\n      }));\n    }\n  }]);\n\n  return DailyMotion;\n}(Component);\n\n_defineProperty(DailyMotion, \"displayName\", 'DailyMotion');\n\n_defineProperty(DailyMotion, \"canPlay\", function (url) {\n  return MATCH_URL.test(url);\n});\n\n_defineProperty(DailyMotion, \"loopOnEnded\", true);\n\nexport default _c = createSinglePlayer(DailyMotion);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["/Users/braflow/loomradio/src/players/DailyMotion.js"],"names":["React","Component","callPlayer","getSDK","parseStartTime","createSinglePlayer","SDK_URL","SDK_GLOBAL","SDK_GLOBAL_READY","MATCH_URL","DailyMotion","duration","getDuration","props","onDuration","container","url","controls","config","onError","playing","match","id","player","load","start","autoplay","DM","then","Player","width","height","video","params","mute","muted","origin","window","location","dailymotion","events","apiready","onReady","seeked","onSeek","currentTime","video_end","onEnded","durationchange","onDurationChange","pause","onPause","onPlay","waiting","onBuffer","error","event","seconds","fraction","bufferedTime","style","backgroundColor","ref","test"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\n\nimport { callPlayer, getSDK, parseStartTime } from '../utils'\nimport createSinglePlayer from '../singlePlayer'\n\nconst SDK_URL = 'https://api.dmcdn.net/all.js'\nconst SDK_GLOBAL = 'DM'\nconst SDK_GLOBAL_READY = 'dmAsyncInit'\nconst MATCH_URL = /^(?:(?:https?):)?(?:\\/\\/)?(?:www\\.)?(?:(?:dailymotion\\.com(?:\\/embed)?\\/video)|dai\\.ly)\\/([a-zA-Z0-9]+)(?:_[\\w_-]+)?$/\n\nexport class DailyMotion extends Component {\n  static displayName = 'DailyMotion'\n  static canPlay = url => MATCH_URL.test(url)\n  static loopOnEnded = true\n\n  callPlayer = callPlayer\n  load (url) {\n    const { controls, config, onError, playing } = this.props\n    const [, id] = url.match(MATCH_URL)\n    if (this.player) {\n      this.player.load(id, {\n        start: parseStartTime(url),\n        autoplay: playing\n      })\n      return\n    }\n    getSDK(SDK_URL, SDK_GLOBAL, SDK_GLOBAL_READY, DM => DM.player).then(DM => {\n      if (!this.container) return\n      const Player = DM.player\n      this.player = new Player(this.container, {\n        width: '100%',\n        height: '100%',\n        video: id,\n        params: {\n          controls: controls,\n          autoplay: this.props.playing,\n          mute: this.props.muted,\n          start: parseStartTime(url),\n          origin: window.location.origin,\n          ...config.dailymotion.params\n        },\n        events: {\n          apiready: this.props.onReady,\n          seeked: () => this.props.onSeek(this.player.currentTime),\n          video_end: this.props.onEnded,\n          durationchange: this.onDurationChange,\n          pause: this.props.onPause,\n          playing: this.props.onPlay,\n          waiting: this.props.onBuffer,\n          error: event => onError(event)\n        }\n      })\n    }, onError)\n  }\n  onDurationChange = () => {\n    const duration = this.getDuration()\n    this.props.onDuration(duration)\n  }\n  play () {\n    this.callPlayer('play')\n  }\n  pause () {\n    this.callPlayer('pause')\n  }\n  stop () {\n    // Nothing to do\n  }\n  seekTo (seconds) {\n    this.callPlayer('seek', seconds)\n  }\n  setVolume (fraction) {\n    this.callPlayer('setVolume', fraction)\n  }\n  mute = () => {\n    this.callPlayer('setMuted', true)\n  }\n  unmute = () => {\n    this.callPlayer('setMuted', false)\n  }\n  getDuration () {\n    return this.player.duration || null\n  }\n  getCurrentTime () {\n    return this.player.currentTime\n  }\n  getSecondsLoaded () {\n    return this.player.bufferedTime\n  }\n  ref = container => {\n    this.container = container\n  }\n  render () {\n    const style = {\n      width: '100%',\n      height: '100%',\n      backgroundColor: 'black',\n      ...this.props.style\n    }\n    return (\n      <div style={style}>\n        <div ref={this.ref} />\n      </div>\n    )\n  }\n}\n\nexport default createSinglePlayer(DailyMotion)\n"]},"metadata":{},"sourceType":"module"}