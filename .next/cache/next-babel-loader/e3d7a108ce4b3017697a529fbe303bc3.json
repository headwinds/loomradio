{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/braflow/loomradio/src/players/Streamable.js\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport { callPlayer, getSDK } from '../utils';\nimport createSinglePlayer from '../singlePlayer';\nvar SDK_URL = '//cdn.embed.ly/player-0.1.0.min.js';\nvar SDK_GLOBAL = 'playerjs';\nvar MATCH_URL = /streamable\\.com\\/([a-z0-9]+)$/;\nexport var Streamable = /*#__PURE__*/function (_Component) {\n  _inherits(Streamable, _Component);\n\n  var _super = _createSuper(Streamable);\n\n  function Streamable() {\n    var _this;\n\n    _classCallCheck(this, Streamable);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"callPlayer\", callPlayer);\n\n    _defineProperty(_assertThisInitialized(_this), \"duration\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"currentTime\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"secondsLoaded\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"mute\", function () {\n      _this.callPlayer('mute');\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"unmute\", function () {\n      _this.callPlayer('unmute');\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"ref\", function (iframe) {\n      _this.iframe = iframe;\n    });\n\n    return _this;\n  }\n\n  _createClass(Streamable, [{\n    key: \"load\",\n    value: function load(url) {\n      var _this2 = this;\n\n      getSDK(SDK_URL, SDK_GLOBAL).then(function (playerjs) {\n        if (!_this2.iframe) return;\n        _this2.player = new playerjs.Player(_this2.iframe);\n\n        _this2.player.setLoop(_this2.props.loop);\n\n        _this2.player.on('ready', _this2.props.onReady);\n\n        _this2.player.on('play', _this2.props.onPlay);\n\n        _this2.player.on('pause', _this2.props.onPause);\n\n        _this2.player.on('seeked', _this2.props.onSeek);\n\n        _this2.player.on('ended', _this2.props.onEnded);\n\n        _this2.player.on('error', _this2.props.onError);\n\n        _this2.player.on('timeupdate', function (_ref) {\n          var duration = _ref.duration,\n              seconds = _ref.seconds;\n          _this2.duration = duration;\n          _this2.currentTime = seconds;\n        });\n\n        _this2.player.on('buffered', function (_ref2) {\n          var percent = _ref2.percent;\n\n          if (_this2.duration) {\n            _this2.secondsLoaded = _this2.duration * percent;\n          }\n        });\n\n        if (_this2.props.muted) {\n          _this2.player.mute();\n        }\n      }, this.props.onError);\n    }\n  }, {\n    key: \"play\",\n    value: function play() {\n      this.callPlayer('play');\n    }\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      this.callPlayer('pause');\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {// Nothing to do\n    }\n  }, {\n    key: \"seekTo\",\n    value: function seekTo(seconds) {\n      this.callPlayer('setCurrentTime', seconds);\n    }\n  }, {\n    key: \"setVolume\",\n    value: function setVolume(fraction) {\n      this.callPlayer('setVolume', fraction * 100);\n    }\n  }, {\n    key: \"setLoop\",\n    value: function setLoop(loop) {\n      this.callPlayer('setLoop', loop);\n    }\n  }, {\n    key: \"getDuration\",\n    value: function getDuration() {\n      return this.duration;\n    }\n  }, {\n    key: \"getCurrentTime\",\n    value: function getCurrentTime() {\n      return this.currentTime;\n    }\n  }, {\n    key: \"getSecondsLoaded\",\n    value: function getSecondsLoaded() {\n      return this.secondsLoaded;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var id = this.props.url.match(MATCH_URL)[1];\n      var style = {\n        width: '100%',\n        height: '100%'\n      };\n      return __jsx(\"iframe\", {\n        ref: this.ref,\n        src: \"https://streamable.com/o/\".concat(id),\n        frameBorder: \"0\",\n        scrolling: \"no\",\n        style: style,\n        allowFullScreen: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 7\n        }\n      });\n    }\n  }]);\n\n  return Streamable;\n}(Component);\n\n_defineProperty(Streamable, \"displayName\", 'Streamable');\n\n_defineProperty(Streamable, \"canPlay\", function (url) {\n  return MATCH_URL.test(url);\n});\n\nexport default _c = createSinglePlayer(Streamable);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["/Users/braflow/loomradio/src/players/Streamable.js"],"names":["React","Component","callPlayer","getSDK","createSinglePlayer","SDK_URL","SDK_GLOBAL","MATCH_URL","Streamable","iframe","url","then","playerjs","player","Player","setLoop","props","loop","on","onReady","onPlay","onPause","onSeek","onEnded","onError","duration","seconds","currentTime","percent","secondsLoaded","muted","mute","fraction","id","match","style","width","height","ref","test"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\n\nimport { callPlayer, getSDK } from '../utils'\nimport createSinglePlayer from '../singlePlayer'\n\nconst SDK_URL = '//cdn.embed.ly/player-0.1.0.min.js'\nconst SDK_GLOBAL = 'playerjs'\nconst MATCH_URL = /streamable\\.com\\/([a-z0-9]+)$/\n\nexport class Streamable extends Component {\n  static displayName = 'Streamable'\n  static canPlay = url => MATCH_URL.test(url)\n\n  callPlayer = callPlayer\n  duration = null\n  currentTime = null\n  secondsLoaded = null\n  load (url) {\n    getSDK(SDK_URL, SDK_GLOBAL).then(playerjs => {\n      if (!this.iframe) return\n      this.player = new playerjs.Player(this.iframe)\n      this.player.setLoop(this.props.loop)\n      this.player.on('ready', this.props.onReady)\n      this.player.on('play', this.props.onPlay)\n      this.player.on('pause', this.props.onPause)\n      this.player.on('seeked', this.props.onSeek)\n      this.player.on('ended', this.props.onEnded)\n      this.player.on('error', this.props.onError)\n      this.player.on('timeupdate', ({ duration, seconds }) => {\n        this.duration = duration\n        this.currentTime = seconds\n      })\n      this.player.on('buffered', ({ percent }) => {\n        if (this.duration) {\n          this.secondsLoaded = this.duration * percent\n        }\n      })\n      if (this.props.muted) {\n        this.player.mute()\n      }\n    }, this.props.onError)\n  }\n  play () {\n    this.callPlayer('play')\n  }\n  pause () {\n    this.callPlayer('pause')\n  }\n  stop () {\n    // Nothing to do\n  }\n  seekTo (seconds) {\n    this.callPlayer('setCurrentTime', seconds)\n  }\n  setVolume (fraction) {\n    this.callPlayer('setVolume', fraction * 100)\n  }\n  setLoop (loop) {\n    this.callPlayer('setLoop', loop)\n  }\n  mute = () => {\n    this.callPlayer('mute')\n  }\n  unmute = () => {\n    this.callPlayer('unmute')\n  }\n  getDuration () {\n    return this.duration\n  }\n  getCurrentTime () {\n    return this.currentTime\n  }\n  getSecondsLoaded () {\n    return this.secondsLoaded\n  }\n  ref = iframe => {\n    this.iframe = iframe\n  }\n  render () {\n    const id = this.props.url.match(MATCH_URL)[1]\n    const style = {\n      width: '100%',\n      height: '100%'\n    }\n    return (\n      <iframe\n        ref={this.ref}\n        src={`https://streamable.com/o/${id}`}\n        frameBorder='0'\n        scrolling='no'\n        style={style}\n        allowFullScreen\n      />\n    )\n  }\n}\n\nexport default createSinglePlayer(Streamable)\n"]},"metadata":{},"sourceType":"module"}