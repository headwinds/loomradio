{"ast":null,"code":"var _jsxFileName = \"/Users/braflow/loomradio/src/App.js\";\nvar __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from \"react\"; // import { findDOMNode } from \"react-dom\";\n// import screenfull from \"screenfull\";\n// import config from \"./config\";\n\nimport DanceFloor from \"./channel/DanceFloor\";\nimport loomradioMark from \"./loomradio_mark.svg\";\nimport { version } from \"../package.json\";\nimport ReactPlayer from \"./ReactPlayer\";\nimport { stations } from \"./stations/stations\";\nimport { ChatFeed, Message } from \"react-chat-ui\";\nconst station = stations.find(station => station.name === \"bassdrive\");\nconst bassdrive = station.url;\nconst torontoRadio1 = bassdrive;\nconst torontoRadio2 = bassdrive;\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      station,\n      url: bassdrive,\n      //\n      pip: false,\n      playing: false,\n      controls: false,\n      light: false,\n      volume: 0.5,\n      muted: false,\n      played: 0,\n      loaded: 0,\n      duration: 0,\n      playbackRate: 1.0,\n      loop: false,\n      meta: null,\n      currentShow: \"Loom Radio\",\n      messages: [new Message({\n        id: 2,\n        message: \"I'm the recipient! (The person you're talking to)\"\n      }), // Gray bubble\n      new Message({\n        id: 1,\n        message: \"I'm the recipient! (The person you're talking to)\"\n      }), // Gray bubble\n      new Message({\n        id: 0,\n        message: \"I'm you -- the blue bubble!\"\n      }) // Blue bubble\n      ],\n      is_typing: false\n    });\n\n    _defineProperty(this, \"load\", url => {\n      this.setState({\n        url,\n        played: 0,\n        loaded: 0,\n        pip: false\n      });\n    });\n\n    _defineProperty(this, \"playPause\", event => {\n      this.setState({\n        playing: !this.state.playing\n      });\n    });\n\n    _defineProperty(this, \"stop\", () => {\n      this.setState({\n        url: null,\n        playing: false\n      });\n    });\n\n    _defineProperty(this, \"toggleControls\", () => {\n      const url = this.state.url;\n      this.setState({\n        controls: !this.state.controls,\n        url: null\n      }, () => this.load(url));\n    });\n\n    _defineProperty(this, \"toggleLight\", () => {\n      this.setState({\n        light: !this.state.light\n      });\n    });\n\n    _defineProperty(this, \"toggleLoop\", () => {\n      this.setState({\n        loop: !this.state.loop\n      });\n    });\n\n    _defineProperty(this, \"setVolume\", e => {\n      this.setState({\n        volume: parseFloat(e.target.value)\n      });\n    });\n\n    _defineProperty(this, \"toggleMuted\", () => {\n      this.setState({\n        muted: !this.state.muted\n      });\n    });\n\n    _defineProperty(this, \"setPlaybackRate\", e => {\n      this.setState({\n        playbackRate: parseFloat(e.target.value)\n      });\n    });\n\n    _defineProperty(this, \"togglePIP\", () => {\n      this.setState({\n        pip: !this.state.pip\n      });\n    });\n\n    _defineProperty(this, \"onSearch\", () => {\n      /*\n       Need to get googleAPI key and store config on dropbox\n       const { meta } = this.state;\n      const cx = \"001416230067881723525:aixpfy93ova\";\n      const query = `${meta.host} drum and bass`;\n      const apiKey = config.googleAPI;\n      const url = `https://www.googleapis.com/customsearch/v1?key=${apiKey}&cx=${cx}&q=${query}`;\n      fetch(url).then(\n        success => {\n          console.log(\"TCL: App -> onSearch -> success\", success);\n        },\n        fail => {}\n      );\n      */\n    });\n\n    _defineProperty(this, \"fetchMeta\", station => {\n      const {\n        ownmetadataurl\n      } = station;\n      const self = this;\n      const decoder = new TextDecoder(\"utf-8\");\n      return fetch(ownmetadataurl).then(response => {\n        response.body.getReader().read().then(({\n          value,\n          done\n        }) => {\n          console.log(decoder.decode(value));\n          const artist = decoder.decode(value);\n          const host = artist.split(\"-\")[0];\n          const show = artist.split(\"-\")[1]; // need parse out date\n\n          return self.setState({\n            meta: {\n              StreamTitle: artist\n            },\n            host,\n            show\n          });\n        });\n      });\n    });\n\n    _defineProperty(this, \"onPlay\", () => {\n      console.log(\"App onPlay\");\n      const self = this;\n      const {\n        station,\n        url\n      } = this.state;\n\n      const Parser = require(\"icecast-parser\");\n\n      const radioStation = new Parser(url); // \"http://bassdrive.radioca.st/;stream/1\"\n\n      if (station.ownmetadataurl) {\n        this.fetchMeta(station);\n      }\n\n      radioStation.on(\"metadata\", function (metadata) {\n        //Live from NY hosted by Overfiend - special guest SOHLMAN\n        //The Prague Connection June 17th 2019 - hosted by Blofeld\n        const host = metadata.StreamTitle.split(\"by\")[1];\n        const show = metadata.StreamTitle.split(\"hosted\")[0]; // need parse out date\n\n        console.log(\"App onPlay metadata: \", metadata);\n        self.setState({\n          meta: metadata,\n          host,\n          show\n        });\n      });\n      radioStation.on(\"end\", function (error) {\n        console.log(\"radioStation ended\");\n      });\n      radioStation.on(\"error\", function (error) {\n        console.log(\"radioStation error\", error);\n      });\n      radioStation.on(\"empty\", function () {\n        console.log(\"radioStation empty\");\n      });\n      radioStation.on(\"stream\", function (stream) {\n        //stream.pipe(process.stdout);\n        console.log(\"radioStation stream \", stream);\n      });\n      radioStation.on(\"error\", error => {\n        console.log(\"radioStation error \", error);\n      });\n      this.setState({\n        playing: true\n      });\n    });\n\n    _defineProperty(this, \"onEnablePIP\", () => {\n      console.log(\"onEnablePIP\");\n      this.setState({\n        pip: true\n      });\n    });\n\n    _defineProperty(this, \"onDisablePIP\", () => {\n      console.log(\"onDisablePIP\");\n      this.setState({\n        pip: false\n      });\n    });\n\n    _defineProperty(this, \"onPause\", () => {\n      console.log(\"onPause\");\n      this.setState({\n        playing: false\n      });\n    });\n\n    _defineProperty(this, \"onSeekMouseDown\", e => {\n      this.setState({\n        seeking: true\n      });\n    });\n\n    _defineProperty(this, \"onSeekChange\", e => {\n      this.setState({\n        played: parseFloat(e.target.value)\n      });\n    });\n\n    _defineProperty(this, \"onSeekMouseUp\", e => {\n      this.setState({\n        seeking: false\n      });\n      this.player.seekTo(parseFloat(e.target.value));\n    });\n\n    _defineProperty(this, \"onProgress\", state => {\n      console.log(\"onProgress\", state); // We only want to update time slider if we are not currently seeking\n\n      if (!this.state.seeking) {\n        this.setState(state);\n      }\n    });\n\n    _defineProperty(this, \"onEnded\", () => {\n      console.log(\"onEnded\");\n      this.setState({\n        playing: this.state.loop\n      });\n    });\n\n    _defineProperty(this, \"onDuration\", duration => {\n      console.log(\"onDuration\", duration);\n      this.setState({\n        duration\n      });\n    });\n\n    _defineProperty(this, \"onClickFullscreen\", () => {// screenfull.request(findDOMNode(this.player));\n    });\n\n    _defineProperty(this, \"renderLoadButton\", (url, label) => {\n      return __jsx(\"button\", {\n        onClick: () => this.load(url),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 12\n        }\n      }, label);\n    });\n\n    _defineProperty(this, \"ref\", player => {\n      this.player = player;\n    });\n\n    _defineProperty(this, \"renderMeta\", meta => {\n      if (this.state.playing && this.state.meta) {\n        console.log(\"App meta: \", meta);\n        return __jsx(\"div\", {\n          className: \"meta\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 9\n          }\n        }, __jsx(\"button\", {\n          onClick: this.onSearch,\n          className: \"meta-show\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 11\n          }\n        }, __jsx(\"h2\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 13\n          }\n        }, this.state.meta.StreamTitle)));\n      } else if (this.state.currentShow !== \"Loom Radio\") {\n        return __jsx(\"div\", {\n          className: \"meta\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 14\n          }\n        }, \"no stream details available\");\n      }\n    });\n\n    _defineProperty(this, \"selectShow\", currentShow => e => {\n      const station = stations.find(station => station.name === currentShow);\n      const {\n        url\n      } = station;\n      this.setState({\n        currentShow,\n        station,\n        url,\n        meta: null\n      });\n    });\n\n    _defineProperty(this, \"onErrorHandler\", e => {\n      console.log(e);\n    });\n\n    _defineProperty(this, \"onBufferHandler\", () => {\n      console.log(\"App handling buffer from FilePlayer\");\n    });\n  }\n\n  componentDidMount() {}\n\n  render() {\n    const {\n      url,\n      playing,\n      controls,\n      light,\n      volume,\n      muted,\n      loop,\n      played,\n      loaded,\n      duration,\n      playbackRate,\n      pip,\n      currentShow\n    } = this.state;\n    const SEPARATOR = \" · \";\n    const min = 0;\n    const max = 1;\n\n    const renderStationButtons = () => {\n      return stations.map(station => {\n        const {\n          name\n        } = station;\n        return __jsx(\"button\", {\n          className: \"select-show\",\n          onClick: this.selectShow(name),\n          key: name,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 11\n          }\n        }, name);\n      });\n    };\n\n    return __jsx(\"div\", {\n      className: \"loomradio\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 7\n      }\n    }, __jsx(ChatFeed, {\n      messages: this.state.messages // Array: list of message objects\n      ,\n      isTyping: this.state.is_typing // Boolean: is the recipient typing\n      ,\n      hasInputField: false // Boolean: use our input, or use your own\n      ,\n      showSenderName: true // show the name of the user who sent the message\n      ,\n      bubblesCentered: false //Boolean should the bubbles be centered in the feed?\n      // JSON: Custom bubble styles\n      ,\n      bubbleStyles: {\n        text: {\n          fontSize: 18\n        },\n        chatbubble: {\n          borderRadius: 10,\n          padding: 20\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 9\n      }\n    }), __jsx(\"section\", {\n      className: \"section\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 9\n      }\n    }, __jsx(DanceFloor, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 11\n      }\n    }), __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 11\n      }\n    }, __jsx(\"img\", {\n      src: loomradioMark,\n      alt: \"loomradio\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 13\n      }\n    })), __jsx(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 11\n      }\n    }, currentShow), __jsx(\"div\", {\n      className: \"player-wrapper\",\n      style: {\n        display: \"none\",\n        marginBottom: 20\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 11\n      }\n    }, __jsx(ReactPlayer, {\n      ref: this.ref,\n      className: \"react-player\",\n      width: \"100%\",\n      height: \"100%\",\n      url: url,\n      pip: pip,\n      playing: playing,\n      controls: controls,\n      light: light,\n      loop: loop,\n      playbackRate: playbackRate,\n      volume: volume,\n      muted: muted,\n      onReady: () => console.log(\"onReady\"),\n      onStart: () => console.log(\"onStart\"),\n      onPlay: this.onPlay,\n      onEnablePIP: this.onEnablePIP,\n      onDisablePIP: this.onDisablePIP,\n      onPause: this.onPause,\n      onBuffer: this.onBufferHandler,\n      onSeek: e => console.log(\"onSeek\", e),\n      onEnded: this.onEnded,\n      onError: this.onErrorHandler,\n      onProgress: this.onProgress,\n      onDuration: this.onDuration,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 13\n      }\n    })), this.renderMeta(), __jsx(\"div\", {\n      style: {\n        display: \"flex\",\n        flexDirection: \"row\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        marginBottom: 20\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 11\n      }\n    }, currentShow !== \"Loom Radio\" && __jsx(\"button\", {\n      className: \"playBtn animate-in\",\n      onClick: this.playPause,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 15\n      }\n    }, playing ? \"Pause\" : \"Play\"), currentShow !== \"Loom Radio\" && __jsx(\"input\", {\n      className: \"InputRange animate-in\",\n      type: \"range\",\n      min: min,\n      max: max,\n      step: \"any\",\n      value: volume,\n      onChange: this.setVolume,\n      style: {\n        backgroundSize: `${(volume - min) / (max - min) * 100}% 100%`\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 365,\n        columnNumber: 15\n      }\n    })), __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 11\n      }\n    }, renderStationButtons()), __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 11\n      }\n    }, __jsx(\"span\", {\n      style: {\n        fontSize: 10,\n        color: \"#ddd\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 398,\n        columnNumber: 13\n      }\n    }, version))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/braflow/loomradio/src/App.js"],"names":["React","Component","DanceFloor","loomradioMark","version","ReactPlayer","stations","ChatFeed","Message","station","find","name","bassdrive","url","torontoRadio1","torontoRadio2","App","pip","playing","controls","light","volume","muted","played","loaded","duration","playbackRate","loop","meta","currentShow","messages","id","message","is_typing","setState","event","state","load","e","parseFloat","target","value","ownmetadataurl","self","decoder","TextDecoder","fetch","then","response","body","getReader","read","done","console","log","decode","artist","host","split","show","StreamTitle","Parser","require","radioStation","fetchMeta","on","metadata","error","stream","seeking","player","seekTo","label","onSearch","componentDidMount","render","SEPARATOR","min","max","renderStationButtons","map","selectShow","text","fontSize","chatbubble","borderRadius","padding","display","marginBottom","ref","onPlay","onEnablePIP","onDisablePIP","onPause","onBufferHandler","onEnded","onErrorHandler","onProgress","onDuration","renderMeta","flexDirection","alignItems","justifyContent","playPause","setVolume","backgroundSize","color"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\n// import { findDOMNode } from \"react-dom\";\n// import screenfull from \"screenfull\";\n// import config from \"./config\";\nimport DanceFloor from \"./channel/DanceFloor\";\nimport loomradioMark from \"./loomradio_mark.svg\";\nimport { version } from \"../package.json\";\nimport ReactPlayer from \"./ReactPlayer\";\nimport { stations } from \"./stations/stations\";\nimport { ChatFeed, Message } from \"react-chat-ui\";\n\nconst station = stations.find((station) => station.name === \"bassdrive\");\nconst bassdrive = station.url;\nconst torontoRadio1 = bassdrive;\nconst torontoRadio2 = bassdrive;\n\nclass App extends Component {\n  state = {\n    station,\n    url: bassdrive, //\n    pip: false,\n    playing: false,\n    controls: false,\n    light: false,\n    volume: 0.5,\n    muted: false,\n    played: 0,\n    loaded: 0,\n    duration: 0,\n    playbackRate: 1.0,\n    loop: false,\n    meta: null,\n    currentShow: \"Loom Radio\",\n    messages: [\n      new Message({\n        id: 2,\n        message: \"I'm the recipient! (The person you're talking to)\",\n      }), // Gray bubble\n      new Message({\n        id: 1,\n        message: \"I'm the recipient! (The person you're talking to)\",\n      }), // Gray bubble\n      new Message({ id: 0, message: \"I'm you -- the blue bubble!\" }), // Blue bubble\n    ],\n    is_typing: false,\n  };\n  componentDidMount() {}\n  load = (url) => {\n    this.setState({\n      url,\n      played: 0,\n      loaded: 0,\n      pip: false,\n    });\n  };\n  playPause = (event) => {\n    this.setState({ playing: !this.state.playing });\n  };\n  stop = () => {\n    this.setState({ url: null, playing: false });\n  };\n  toggleControls = () => {\n    const url = this.state.url;\n    this.setState(\n      {\n        controls: !this.state.controls,\n        url: null,\n      },\n      () => this.load(url)\n    );\n  };\n  toggleLight = () => {\n    this.setState({ light: !this.state.light });\n  };\n  toggleLoop = () => {\n    this.setState({ loop: !this.state.loop });\n  };\n  setVolume = (e) => {\n    this.setState({ volume: parseFloat(e.target.value) });\n  };\n  toggleMuted = () => {\n    this.setState({ muted: !this.state.muted });\n  };\n  setPlaybackRate = (e) => {\n    this.setState({ playbackRate: parseFloat(e.target.value) });\n  };\n  togglePIP = () => {\n    this.setState({ pip: !this.state.pip });\n  };\n  onSearch = () => {\n    /*\n\n    Need to get googleAPI key and store config on dropbox\n\n    const { meta } = this.state;\n    const cx = \"001416230067881723525:aixpfy93ova\";\n    const query = `${meta.host} drum and bass`;\n    const apiKey = config.googleAPI;\n    const url = `https://www.googleapis.com/customsearch/v1?key=${apiKey}&cx=${cx}&q=${query}`;\n    fetch(url).then(\n      success => {\n        console.log(\"TCL: App -> onSearch -> success\", success);\n      },\n      fail => {}\n    );\n    */\n  };\n\n  fetchMeta = (station) => {\n    const { ownmetadataurl } = station;\n\n    const self = this;\n\n    const decoder = new TextDecoder(\"utf-8\");\n    return fetch(ownmetadataurl).then((response) => {\n      response.body\n        .getReader()\n        .read()\n        .then(({ value, done }) => {\n          console.log(decoder.decode(value));\n          const artist = decoder.decode(value);\n\n          const host = artist.split(\"-\")[0];\n          const show = artist.split(\"-\")[1]; // need parse out date\n\n          return self.setState({ meta: { StreamTitle: artist }, host, show });\n        });\n    });\n  };\n\n  onPlay = () => {\n    console.log(\"App onPlay\");\n    const self = this;\n    const { station, url } = this.state;\n\n    const Parser = require(\"icecast-parser\");\n    const radioStation = new Parser(url);\n\n    // \"http://bassdrive.radioca.st/;stream/1\"\n\n    if (station.ownmetadataurl) {\n      this.fetchMeta(station);\n    }\n\n    radioStation.on(\"metadata\", function (metadata) {\n      //Live from NY hosted by Overfiend - special guest SOHLMAN\n      //The Prague Connection June 17th 2019 - hosted by Blofeld\n      const host = metadata.StreamTitle.split(\"by\")[1];\n      const show = metadata.StreamTitle.split(\"hosted\")[0]; // need parse out date\n\n      console.log(\"App onPlay metadata: \", metadata);\n\n      self.setState({ meta: metadata, host, show });\n    });\n\n    radioStation.on(\"end\", function (error) {\n      console.log(\"radioStation ended\");\n    });\n\n    radioStation.on(\"error\", function (error) {\n      console.log(\"radioStation error\", error);\n    });\n\n    radioStation.on(\"empty\", function () {\n      console.log(\"radioStation empty\");\n    });\n\n    radioStation.on(\"stream\", function (stream) {\n      //stream.pipe(process.stdout);\n      console.log(\"radioStation stream \", stream);\n    });\n\n    radioStation.on(\"error\", (error) => {\n      console.log(\"radioStation error \", error);\n    });\n\n    this.setState({ playing: true });\n  };\n  onEnablePIP = () => {\n    console.log(\"onEnablePIP\");\n    this.setState({ pip: true });\n  };\n  onDisablePIP = () => {\n    console.log(\"onDisablePIP\");\n    this.setState({ pip: false });\n  };\n  onPause = () => {\n    console.log(\"onPause\");\n    this.setState({ playing: false });\n  };\n  onSeekMouseDown = (e) => {\n    this.setState({ seeking: true });\n  };\n  onSeekChange = (e) => {\n    this.setState({ played: parseFloat(e.target.value) });\n  };\n  onSeekMouseUp = (e) => {\n    this.setState({ seeking: false });\n    this.player.seekTo(parseFloat(e.target.value));\n  };\n  onProgress = (state) => {\n    console.log(\"onProgress\", state);\n    // We only want to update time slider if we are not currently seeking\n    if (!this.state.seeking) {\n      this.setState(state);\n    }\n  };\n  onEnded = () => {\n    console.log(\"onEnded\");\n    this.setState({ playing: this.state.loop });\n  };\n  onDuration = (duration) => {\n    console.log(\"onDuration\", duration);\n    this.setState({ duration });\n  };\n  onClickFullscreen = () => {\n    // screenfull.request(findDOMNode(this.player));\n  };\n  renderLoadButton = (url, label) => {\n    return <button onClick={() => this.load(url)}>{label}</button>;\n  };\n  ref = (player) => {\n    this.player = player;\n  };\n  renderMeta = (meta) => {\n    if (this.state.playing && this.state.meta) {\n      console.log(\"App meta: \", meta);\n      return (\n        <div className=\"meta\">\n          <button onClick={this.onSearch} className=\"meta-show\">\n            <h2>{this.state.meta.StreamTitle}</h2>\n          </button>\n        </div>\n      );\n    } else if (this.state.currentShow !== \"Loom Radio\") {\n      return <div className=\"meta\">no stream details available</div>;\n    }\n  };\n\n  selectShow = (currentShow) => (e) => {\n    const station = stations.find((station) => station.name === currentShow);\n    const { url } = station;\n\n    this.setState({ currentShow, station, url, meta: null });\n  };\n\n  onErrorHandler = (e) => {\n    console.log(e);\n  };\n\n  onBufferHandler = () => {\n    console.log(\"App handling buffer from FilePlayer\");\n  };\n\n  render() {\n    const {\n      url,\n      playing,\n      controls,\n      light,\n      volume,\n      muted,\n      loop,\n      played,\n      loaded,\n      duration,\n      playbackRate,\n      pip,\n      currentShow,\n    } = this.state;\n    const SEPARATOR = \" · \";\n\n    const min = 0;\n    const max = 1;\n\n    const renderStationButtons = () => {\n      return stations.map((station) => {\n        const { name } = station;\n        return (\n          <button\n            className=\"select-show\"\n            onClick={this.selectShow(name)}\n            key={name}\n          >\n            {name}\n          </button>\n        );\n      });\n    };\n\n    return (\n      <div className=\"loomradio\">\n        <ChatFeed\n          messages={this.state.messages} // Array: list of message objects\n          isTyping={this.state.is_typing} // Boolean: is the recipient typing\n          hasInputField={false} // Boolean: use our input, or use your own\n          showSenderName // show the name of the user who sent the message\n          bubblesCentered={false} //Boolean should the bubbles be centered in the feed?\n          // JSON: Custom bubble styles\n          bubbleStyles={{\n            text: {\n              fontSize: 18,\n            },\n            chatbubble: {\n              borderRadius: 10,\n              padding: 20,\n            },\n          }}\n        />\n        <section className=\"section\">\n          <DanceFloor />\n          <div>\n            <img src={loomradioMark} alt=\"loomradio\" />\n          </div>\n          <h1>{currentShow}</h1>\n          <div\n            className=\"player-wrapper\"\n            style={{ display: \"none\", marginBottom: 20 }}\n          >\n            <ReactPlayer\n              ref={this.ref}\n              className=\"react-player\"\n              width=\"100%\"\n              height=\"100%\"\n              url={url}\n              pip={pip}\n              playing={playing}\n              controls={controls}\n              light={light}\n              loop={loop}\n              playbackRate={playbackRate}\n              volume={volume}\n              muted={muted}\n              onReady={() => console.log(\"onReady\")}\n              onStart={() => console.log(\"onStart\")}\n              onPlay={this.onPlay}\n              onEnablePIP={this.onEnablePIP}\n              onDisablePIP={this.onDisablePIP}\n              onPause={this.onPause}\n              onBuffer={this.onBufferHandler}\n              onSeek={(e) => console.log(\"onSeek\", e)}\n              onEnded={this.onEnded}\n              onError={this.onErrorHandler}\n              onProgress={this.onProgress}\n              onDuration={this.onDuration}\n            />\n          </div>\n          {this.renderMeta()}\n          <div\n            style={{\n              display: \"flex\",\n              flexDirection: \"row\",\n              alignItems: \"center\",\n              justifyContent: \"center\",\n              marginBottom: 20,\n            }}\n          >\n            {currentShow !== \"Loom Radio\" && (\n              <button className=\"playBtn animate-in\" onClick={this.playPause}>\n                {playing ? \"Pause\" : \"Play\"}\n              </button>\n            )}\n\n            {currentShow !== \"Loom Radio\" && (\n              <input\n                className=\"InputRange animate-in\"\n                type=\"range\"\n                min={min}\n                max={max}\n                step=\"any\"\n                value={volume}\n                onChange={this.setVolume}\n                style={{\n                  backgroundSize: `${\n                    ((volume - min) / (max - min)) * 100\n                  }% 100%`,\n                }}\n              />\n            )}\n          </div>\n          <div>\n            {renderStationButtons()}\n            {/*\n            <button\n              className=\"select-show\"\n              onClick={this.selectShow(\"CBC Radio 1\")}\n            >\n              CBC Radio 1\n            </button>\n            <button\n              className=\"select-show\"\n              onClick={this.selectShow(\"CBC Radio 2\")}\n            >\n              CBC Radio 2\n            </button>*/}\n          </div>\n          <div>\n            <span style={{ fontSize: 10, color: \"#ddd\" }}>{version}</span>\n          </div>\n        </section>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}