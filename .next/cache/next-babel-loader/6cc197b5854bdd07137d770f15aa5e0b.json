{"ast":null,"code":"import _extends from \"/Users/braflow/loomradio/node_modules/@babel/runtime/helpers/esm/extends\";\nimport _classCallCheck from \"/Users/braflow/loomradio/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/braflow/loomradio/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/Users/braflow/loomradio/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/braflow/loomradio/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/braflow/loomradio/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/braflow/loomradio/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"/Users/braflow/loomradio/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/braflow/loomradio/src/singlePlayer.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport { propTypes, defaultProps, DEPRECATED_CONFIG_PROPS } from './props';\nimport { getConfig, omit, isEqual } from './utils';\nimport Player from './Player';\nvar SUPPORTED_PROPS = Object.keys(propTypes);\nexport default function createSinglePlayer(activePlayer) {\n  var _class, _temp;\n\n  return _temp = _class = /*#__PURE__*/function (_Component) {\n    _inherits(SinglePlayer, _Component);\n\n    var _super = _createSuper(SinglePlayer);\n\n    function SinglePlayer() {\n      var _this;\n\n      _classCallCheck(this, SinglePlayer);\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      _this = _super.call.apply(_super, [this].concat(args));\n\n      _defineProperty(_assertThisInitialized(_this), \"config\", getConfig(_this.props, defaultProps, true));\n\n      _defineProperty(_assertThisInitialized(_this), \"getDuration\", function () {\n        if (!_this.player) return null;\n        return _this.player.getDuration();\n      });\n\n      _defineProperty(_assertThisInitialized(_this), \"getCurrentTime\", function () {\n        if (!_this.player) return null;\n        return _this.player.getCurrentTime();\n      });\n\n      _defineProperty(_assertThisInitialized(_this), \"getSecondsLoaded\", function () {\n        if (!_this.player) return null;\n        return _this.player.getSecondsLoaded();\n      });\n\n      _defineProperty(_assertThisInitialized(_this), \"getInternalPlayer\", function () {\n        var key = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'player';\n        if (!_this.player) return null;\n        return _this.player.getInternalPlayer(key);\n      });\n\n      _defineProperty(_assertThisInitialized(_this), \"seekTo\", function (fraction, type) {\n        if (!_this.player) return null;\n\n        _this.player.seekTo(fraction, type);\n      });\n\n      _defineProperty(_assertThisInitialized(_this), \"ref\", function (player) {\n        _this.player = player;\n      });\n\n      return _this;\n    }\n\n    _createClass(SinglePlayer, [{\n      key: \"shouldComponentUpdate\",\n      value: function shouldComponentUpdate(nextProps) {\n        return !isEqual(this.props, nextProps);\n      }\n    }, {\n      key: \"componentWillUpdate\",\n      value: function componentWillUpdate(nextProps) {\n        this.config = getConfig(nextProps, defaultProps);\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _this$config$file = this.config.file,\n            forceVideo = _this$config$file.forceVideo,\n            forceAudio = _this$config$file.forceAudio,\n            forceHLS = _this$config$file.forceHLS,\n            forceDASH = _this$config$file.forceDASH;\n        var skipCanPlay = forceVideo || forceAudio || forceHLS || forceDASH;\n\n        if (!activePlayer.canPlay(this.props.url) && !skipCanPlay) {\n          return null;\n        }\n\n        var _this$props = this.props,\n            style = _this$props.style,\n            width = _this$props.width,\n            height = _this$props.height,\n            Wrapper = _this$props.wrapper;\n        var otherProps = omit(this.props, SUPPORTED_PROPS, DEPRECATED_CONFIG_PROPS);\n        return __jsx(Wrapper, _extends({\n          style: _objectSpread(_objectSpread({}, style), {}, {\n            width: width,\n            height: height\n          })\n        }, otherProps, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 9\n          }\n        }), __jsx(Player, _extends({}, this.props, {\n          ref: this.ref,\n          activePlayer: activePlayer,\n          config: this.config,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 11\n          }\n        })));\n      }\n    }]);\n\n    return SinglePlayer;\n  }(Component), _defineProperty(_class, \"displayName\", \"\".concat(activePlayer.displayName, \"Player\")), _defineProperty(_class, \"propTypes\", propTypes), _defineProperty(_class, \"defaultProps\", defaultProps), _defineProperty(_class, \"canPlay\", activePlayer.canPlay), _temp;\n}","map":{"version":3,"sources":["/Users/braflow/loomradio/src/singlePlayer.js"],"names":["React","Component","propTypes","defaultProps","DEPRECATED_CONFIG_PROPS","getConfig","omit","isEqual","Player","SUPPORTED_PROPS","Object","keys","createSinglePlayer","activePlayer","props","player","getDuration","getCurrentTime","getSecondsLoaded","key","getInternalPlayer","fraction","type","seekTo","nextProps","config","file","forceVideo","forceAudio","forceHLS","forceDASH","skipCanPlay","canPlay","url","style","width","height","Wrapper","wrapper","otherProps","ref","displayName"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AAEA,SAASC,SAAT,EAAoBC,YAApB,EAAkCC,uBAAlC,QAAiE,SAAjE;AACA,SAASC,SAAT,EAAoBC,IAApB,EAA0BC,OAA1B,QAAyC,SAAzC;AACA,OAAOC,MAAP,MAAmB,UAAnB;AAEA,IAAMC,eAAe,GAAGC,MAAM,CAACC,IAAP,CAAYT,SAAZ,CAAxB;AAEA,eAAe,SAASU,kBAAT,CAA6BC,YAA7B,EAA2C;AAAA;;AACxD;AAAA;;AAAA;;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA;;AAAA;;AAAA,+DAMWR,SAAS,CAAC,MAAKS,KAAN,EAAaX,YAAb,EAA2B,IAA3B,CANpB;;AAAA,oEAagB,YAAM;AAClB,YAAI,CAAC,MAAKY,MAAV,EAAkB,OAAO,IAAP;AAClB,eAAO,MAAKA,MAAL,CAAYC,WAAZ,EAAP;AACD,OAhBH;;AAAA,uEAiBmB,YAAM;AACrB,YAAI,CAAC,MAAKD,MAAV,EAAkB,OAAO,IAAP;AAClB,eAAO,MAAKA,MAAL,CAAYE,cAAZ,EAAP;AACD,OApBH;;AAAA,yEAqBqB,YAAM;AACvB,YAAI,CAAC,MAAKF,MAAV,EAAkB,OAAO,IAAP;AAClB,eAAO,MAAKA,MAAL,CAAYG,gBAAZ,EAAP;AACD,OAxBH;;AAAA,0EAyBsB,YAAoB;AAAA,YAAnBC,GAAmB,uEAAb,QAAa;AACtC,YAAI,CAAC,MAAKJ,MAAV,EAAkB,OAAO,IAAP;AAClB,eAAO,MAAKA,MAAL,CAAYK,iBAAZ,CAA8BD,GAA9B,CAAP;AACD,OA5BH;;AAAA,+DA6BW,UAACE,QAAD,EAAWC,IAAX,EAAoB;AAC3B,YAAI,CAAC,MAAKP,MAAV,EAAkB,OAAO,IAAP;;AAClB,cAAKA,MAAL,CAAYQ,MAAZ,CAAmBF,QAAnB,EAA6BC,IAA7B;AACD,OAhCH;;AAAA,4DAiCQ,UAAAP,MAAM,EAAI;AACd,cAAKA,MAAL,GAAcA,MAAd;AACD,OAnCH;;AAAA;AAAA;;AAAA;AAAA;AAAA,4CAOyBS,SAPzB,EAOoC;AAChC,eAAO,CAACjB,OAAO,CAAC,KAAKO,KAAN,EAAaU,SAAb,CAAf;AACD;AATH;AAAA;AAAA,0CAUuBA,SAVvB,EAUkC;AAC9B,aAAKC,MAAL,GAAcpB,SAAS,CAACmB,SAAD,EAAYrB,YAAZ,CAAvB;AACD;AAZH;AAAA;AAAA,+BAoCY;AAAA,gCACgD,KAAKsB,MAAL,CAAYC,IAD5D;AAAA,YACAC,UADA,qBACAA,UADA;AAAA,YACYC,UADZ,qBACYA,UADZ;AAAA,YACwBC,QADxB,qBACwBA,QADxB;AAAA,YACkCC,SADlC,qBACkCA,SADlC;AAER,YAAMC,WAAW,GAAGJ,UAAU,IAAIC,UAAd,IAA4BC,QAA5B,IAAwCC,SAA5D;;AACA,YAAI,CAACjB,YAAY,CAACmB,OAAb,CAAqB,KAAKlB,KAAL,CAAWmB,GAAhC,CAAD,IAAyC,CAACF,WAA9C,EAA2D;AACzD,iBAAO,IAAP;AACD;;AALO,0BAM2C,KAAKjB,KANhD;AAAA,YAMAoB,KANA,eAMAA,KANA;AAAA,YAMOC,KANP,eAMOA,KANP;AAAA,YAMcC,MANd,eAMcA,MANd;AAAA,YAM+BC,OAN/B,eAMsBC,OANtB;AAOR,YAAMC,UAAU,GAAGjC,IAAI,CAAC,KAAKQ,KAAN,EAAaL,eAAb,EAA8BL,uBAA9B,CAAvB;AACA,eACE,MAAC,OAAD;AAAS,UAAA,KAAK,kCAAO8B,KAAP;AAAcC,YAAAA,KAAK,EAALA,KAAd;AAAqBC,YAAAA,MAAM,EAANA;AAArB;AAAd,WAAiDG,UAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YACE,MAAC,MAAD,eACM,KAAKzB,KADX;AAEE,UAAA,GAAG,EAAE,KAAK0B,GAFZ;AAGE,UAAA,YAAY,EAAE3B,YAHhB;AAIE,UAAA,MAAM,EAAE,KAAKY,MAJf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WADF,CADF;AAUD;AAtDH;;AAAA;AAAA,IAAkCxB,SAAlC,oDAC0BY,YAAY,CAAC4B,WADvC,mDAEqBvC,SAFrB,2CAGwBC,YAHxB,sCAImBU,YAAY,CAACmB,OAJhC;AAwDD","sourcesContent":["import React, { Component } from 'react'\n\nimport { propTypes, defaultProps, DEPRECATED_CONFIG_PROPS } from './props'\nimport { getConfig, omit, isEqual } from './utils'\nimport Player from './Player'\n\nconst SUPPORTED_PROPS = Object.keys(propTypes)\n\nexport default function createSinglePlayer (activePlayer) {\n  return class SinglePlayer extends Component {\n    static displayName = `${activePlayer.displayName}Player`\n    static propTypes = propTypes\n    static defaultProps = defaultProps\n    static canPlay = activePlayer.canPlay\n\n    config = getConfig(this.props, defaultProps, true)\n    shouldComponentUpdate (nextProps) {\n      return !isEqual(this.props, nextProps)\n    }\n    componentWillUpdate (nextProps) {\n      this.config = getConfig(nextProps, defaultProps)\n    }\n    getDuration = () => {\n      if (!this.player) return null\n      return this.player.getDuration()\n    }\n    getCurrentTime = () => {\n      if (!this.player) return null\n      return this.player.getCurrentTime()\n    }\n    getSecondsLoaded = () => {\n      if (!this.player) return null\n      return this.player.getSecondsLoaded()\n    }\n    getInternalPlayer = (key = 'player') => {\n      if (!this.player) return null\n      return this.player.getInternalPlayer(key)\n    }\n    seekTo = (fraction, type) => {\n      if (!this.player) return null\n      this.player.seekTo(fraction, type)\n    }\n    ref = player => {\n      this.player = player\n    }\n    render () {\n      const { forceVideo, forceAudio, forceHLS, forceDASH } = this.config.file\n      const skipCanPlay = forceVideo || forceAudio || forceHLS || forceDASH\n      if (!activePlayer.canPlay(this.props.url) && !skipCanPlay) {\n        return null\n      }\n      const { style, width, height, wrapper: Wrapper } = this.props\n      const otherProps = omit(this.props, SUPPORTED_PROPS, DEPRECATED_CONFIG_PROPS)\n      return (\n        <Wrapper style={{ ...style, width, height }} {...otherProps}>\n          <Player\n            {...this.props}\n            ref={this.ref}\n            activePlayer={activePlayer}\n            config={this.config}\n          />\n        </Wrapper>\n      )\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}