{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/braflow/loomradio/src/App.js\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\"; // import { findDOMNode } from \"react-dom\";\n// import screenfull from \"screenfull\";\n// import config from \"./config\";\n\nimport DanceFloor from \"./channel/DanceFloor\";\nimport loomradioMark from \"./loomradio_mark.svg\";\nimport { version } from \"../package.json\";\nimport ReactPlayer from \"./ReactPlayer\";\nimport { stations } from \"./stations/stations\";\nvar station = stations.find(function (station) {\n  return station.name === \"bassdrive\";\n});\nvar bassdrive = station.url;\nvar torontoRadio1 = bassdrive;\nvar torontoRadio2 = bassdrive;\n\nvar App = /*#__PURE__*/function (_Component) {\n  _inherits(App, _Component);\n\n  var _super = _createSuper(App);\n\n  function App() {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      station: station,\n      url: bassdrive,\n      //\n      pip: false,\n      playing: false,\n      controls: false,\n      light: false,\n      volume: 0.5,\n      muted: false,\n      played: 0,\n      loaded: 0,\n      duration: 0,\n      playbackRate: 1.0,\n      loop: false,\n      meta: null,\n      currentShow: \"Loom Radio\"\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"load\", function (url) {\n      _this.setState({\n        url: url,\n        played: 0,\n        loaded: 0,\n        pip: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"playPause\", function (event) {\n      _this.setState({\n        playing: !_this.state.playing\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"stop\", function () {\n      _this.setState({\n        url: null,\n        playing: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"toggleControls\", function () {\n      var url = _this.state.url;\n\n      _this.setState({\n        controls: !_this.state.controls,\n        url: null\n      }, function () {\n        return _this.load(url);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"toggleLight\", function () {\n      _this.setState({\n        light: !_this.state.light\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"toggleLoop\", function () {\n      _this.setState({\n        loop: !_this.state.loop\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setVolume\", function (e) {\n      _this.setState({\n        volume: parseFloat(e.target.value)\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"toggleMuted\", function () {\n      _this.setState({\n        muted: !_this.state.muted\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setPlaybackRate\", function (e) {\n      _this.setState({\n        playbackRate: parseFloat(e.target.value)\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"togglePIP\", function () {\n      _this.setState({\n        pip: !_this.state.pip\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSearch\", function () {\n      /*\n       Need to get googleAPI key and store config on dropbox\n       const { meta } = this.state;\n      const cx = \"001416230067881723525:aixpfy93ova\";\n      const query = `${meta.host} drum and bass`;\n      const apiKey = config.googleAPI;\n      const url = `https://www.googleapis.com/customsearch/v1?key=${apiKey}&cx=${cx}&q=${query}`;\n      fetch(url).then(\n        success => {\n          console.log(\"TCL: App -> onSearch -> success\", success);\n        },\n        fail => {}\n      );\n      */\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"fetchMeta\", function (station) {\n      var ownmetadataurl = station.ownmetadataurl;\n      /*\n      //const url = `https://cors-anywhere.herokuapp.com/${ownmetadataurl}`;\n      const config = {\n        method: \"GET\", // *GET, POST, PUT, DELETE, etc.\n        mode: \"no-cors\", // no-cors, *cors, same-origin\n        cache: \"no-cache\", // *default, no-cache, reload, force-cache, only-if-cached\n        headers: {\n          \"Content-Type\": \"application/json\",\n          // 'Content-Type': 'application/x-www-form-urlencoded',\n          \"X-Requested-With\": \"XMLHttpRequest\",\n        },\n        redirect: \"follow\", // manual, *follow, error\n        referrerPolicy: \"no-referrer\", // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url\n      };\n       const res = await fetch(ownmetadataurl, config);\n       const reader = await res.body\n        .getReader()\n        .read()\n        .then(({ value, done }) => {\n          console.log(decoder.decode(value));\n          return decoder.decode(value);\n        });\n      console.log(\"yes reader: \", reader);\n      //const json = await response.json();\n      //console.log(\"yes json: \", json);\n      //return json;\n       const decoder = new TextDecoder(\"utf-8\");\n       response.body\n        .getReader()\n        .read()\n        .then(({ value, done }) => {\n          console.log(decoder.decode(value));\n        });\n      */\n\n      return fetch(ownmetadataurl).then(function (response) {\n        response.body.getReader().read().then(function (_ref) {\n          var value = _ref.value,\n              done = _ref.done;\n          console.log(decoder.decode(value));\n          var artist = decoder.decode(value);\n          console.log(\"artist: \", artist);\n          return artist;\n        });\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onPlay\", function () {\n      console.log(\"App onPlay\");\n\n      var self = _assertThisInitialized(_this);\n\n      var _this$state = _this.state,\n          station = _this$state.station,\n          url = _this$state.url;\n\n      var Parser = require(\"icecast-parser\");\n\n      var radioStation = new Parser(url); // \"http://bassdrive.radioca.st/;stream/1\"\n\n      if (station.ownmetadataurl) {\n        _this.fetchMeta(station);\n      }\n\n      radioStation.on(\"metadata\", function (metadata) {\n        //Live from NY hosted by Overfiend - special guest SOHLMAN\n        //The Prague Connection June 17th 2019 - hosted by Blofeld\n        var host = metadata.StreamTitle.split(\"by\")[1];\n        var show = metadata.StreamTitle.split(\"hosted\")[0]; // need parse out date\n\n        console.log(\"App onPlay metadata: \", metadata);\n        self.setState({\n          meta: metadata,\n          host: host,\n          show: show\n        });\n      });\n      radioStation.on(\"end\", function (error) {\n        console.log(\"radioStation ended\");\n      });\n      radioStation.on(\"error\", function (error) {\n        console.log(\"radioStation error\", error);\n      });\n      radioStation.on(\"empty\", function () {\n        console.log(\"radioStation empty\");\n      });\n      radioStation.on(\"stream\", function (stream) {\n        //stream.pipe(process.stdout);\n        console.log(\"radioStation stream \", stream);\n      });\n      radioStation.on(\"error\", function (error) {\n        console.log(\"radioStation error \", error);\n      });\n\n      _this.setState({\n        playing: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onEnablePIP\", function () {\n      console.log(\"onEnablePIP\");\n\n      _this.setState({\n        pip: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onDisablePIP\", function () {\n      console.log(\"onDisablePIP\");\n\n      _this.setState({\n        pip: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onPause\", function () {\n      console.log(\"onPause\");\n\n      _this.setState({\n        playing: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSeekMouseDown\", function (e) {\n      _this.setState({\n        seeking: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSeekChange\", function (e) {\n      _this.setState({\n        played: parseFloat(e.target.value)\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSeekMouseUp\", function (e) {\n      _this.setState({\n        seeking: false\n      });\n\n      _this.player.seekTo(parseFloat(e.target.value));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onProgress\", function (state) {\n      console.log(\"onProgress\", state); // We only want to update time slider if we are not currently seeking\n\n      if (!_this.state.seeking) {\n        _this.setState(state);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onEnded\", function () {\n      console.log(\"onEnded\");\n\n      _this.setState({\n        playing: _this.state.loop\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onDuration\", function (duration) {\n      console.log(\"onDuration\", duration);\n\n      _this.setState({\n        duration: duration\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onClickFullscreen\", function () {// screenfull.request(findDOMNode(this.player));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderLoadButton\", function (url, label) {\n      return __jsx(\"button\", {\n        onClick: function onClick() {\n          return _this.load(url);\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 12\n        }\n      }, label);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"ref\", function (player) {\n      _this.player = player;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderMeta\", function (meta) {\n      if (_this.state.playing && _this.state.meta) {\n        console.log(\"App meta: \", meta);\n        return __jsx(\"div\", {\n          className: \"meta\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 9\n          }\n        }, __jsx(\"button\", {\n          onClick: _this.onSearch,\n          className: \"meta-show\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 11\n          }\n        }, __jsx(\"h2\", {\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 13\n          }\n        }, _this.state.meta.StreamTitle)));\n      } else if (_this.state.currentShow !== \"Loom Radio\") {\n        return __jsx(\"div\", {\n          className: \"meta\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 14\n          }\n        }, \"no stream details available\");\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"selectShow\", function (currentShow) {\n      return function (e) {\n        var station = stations.find(function (station) {\n          return station.name === currentShow;\n        });\n        var url = station.url;\n\n        _this.setState({\n          currentShow: currentShow,\n          station: station,\n          url: url,\n          meta: null\n        });\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onErrorHandler\", function (e) {\n      console.log(e);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onBufferHandler\", function () {\n      console.log(\"App handling buffer from FilePlayer\");\n    });\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {}\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state2 = this.state,\n          url = _this$state2.url,\n          playing = _this$state2.playing,\n          controls = _this$state2.controls,\n          light = _this$state2.light,\n          volume = _this$state2.volume,\n          muted = _this$state2.muted,\n          loop = _this$state2.loop,\n          played = _this$state2.played,\n          loaded = _this$state2.loaded,\n          duration = _this$state2.duration,\n          playbackRate = _this$state2.playbackRate,\n          pip = _this$state2.pip,\n          currentShow = _this$state2.currentShow;\n      var SEPARATOR = \" · \";\n      var min = 0;\n      var max = 1;\n\n      var renderStationButtons = function renderStationButtons() {\n        return stations.map(function (station) {\n          var name = station.name;\n          return __jsx(\"button\", {\n            className: \"select-show\",\n            onClick: _this2.selectShow(name),\n            key: name,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 299,\n              columnNumber: 11\n            }\n          }, name);\n        });\n      };\n\n      return __jsx(\"div\", {\n        className: \"loomradio\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 7\n        }\n      }, __jsx(\"section\", {\n        className: \"section\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 9\n        }\n      }, __jsx(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 11\n        }\n      }, __jsx(\"img\", {\n        src: loomradioMark,\n        alt: \"loomradio\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 13\n        }\n      })), __jsx(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 11\n        }\n      }, currentShow), __jsx(\"div\", {\n        className: \"player-wrapper\",\n        style: {\n          display: \"none\",\n          marginBottom: 20\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 11\n        }\n      }, __jsx(ReactPlayer, {\n        ref: this.ref,\n        className: \"react-player\",\n        width: \"100%\",\n        height: \"100%\",\n        url: url,\n        pip: pip,\n        playing: playing,\n        controls: controls,\n        light: light,\n        loop: loop,\n        playbackRate: playbackRate,\n        volume: volume,\n        muted: muted,\n        onReady: function onReady() {\n          return console.log(\"onReady\");\n        },\n        onStart: function onStart() {\n          return console.log(\"onStart\");\n        },\n        onPlay: this.onPlay,\n        onEnablePIP: this.onEnablePIP,\n        onDisablePIP: this.onDisablePIP,\n        onPause: this.onPause,\n        onBuffer: this.onBufferHandler,\n        onSeek: function onSeek(e) {\n          return console.log(\"onSeek\", e);\n        },\n        onEnded: this.onEnded,\n        onError: this.onErrorHandler,\n        onProgress: this.onProgress,\n        onDuration: this.onDuration,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 13\n        }\n      })), this.renderMeta(), __jsx(\"div\", {\n        style: {\n          display: \"flex\",\n          flexDirection: \"row\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n          marginBottom: 20\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 11\n        }\n      }, currentShow !== \"Loom Radio\" && __jsx(\"button\", {\n        className: \"playBtn animate-in\",\n        onClick: this.playPause,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 15\n        }\n      }, playing ? \"Pause\" : \"Play\"), currentShow !== \"Loom Radio\" && __jsx(\"input\", {\n        className: \"InputRange animate-in\",\n        type: \"range\",\n        min: min,\n        max: max,\n        step: \"any\",\n        value: volume,\n        onChange: this.setVolume,\n        style: {\n          backgroundSize: \"\".concat((volume - min) / (max - min) * 100, \"% 100%\")\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 15\n        }\n      })), __jsx(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 11\n        }\n      }, renderStationButtons()), __jsx(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 399,\n          columnNumber: 11\n        }\n      }, __jsx(\"span\", {\n        style: {\n          fontSize: 10,\n          color: \"#ddd\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 13\n        }\n      }, version))));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/Users/braflow/loomradio/src/App.js"],"names":["React","Component","DanceFloor","loomradioMark","version","ReactPlayer","stations","station","find","name","bassdrive","url","torontoRadio1","torontoRadio2","App","pip","playing","controls","light","volume","muted","played","loaded","duration","playbackRate","loop","meta","currentShow","setState","event","state","load","e","parseFloat","target","value","ownmetadataurl","fetch","then","response","body","getReader","read","done","console","log","decoder","decode","artist","self","Parser","require","radioStation","fetchMeta","on","metadata","host","StreamTitle","split","show","error","stream","seeking","player","seekTo","label","onSearch","SEPARATOR","min","max","renderStationButtons","map","selectShow","display","marginBottom","ref","onPlay","onEnablePIP","onDisablePIP","onPause","onBufferHandler","onEnded","onErrorHandler","onProgress","onDuration","renderMeta","flexDirection","alignItems","justifyContent","playPause","setVolume","backgroundSize","fontSize","color"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\n// import { findDOMNode } from \"react-dom\";\n// import screenfull from \"screenfull\";\n// import config from \"./config\";\nimport DanceFloor from \"./channel/DanceFloor\";\nimport loomradioMark from \"./loomradio_mark.svg\";\nimport { version } from \"../package.json\";\nimport ReactPlayer from \"./ReactPlayer\";\nimport { stations } from \"./stations/stations\";\n\nconst station = stations.find((station) => station.name === \"bassdrive\");\nconst bassdrive = station.url;\nconst torontoRadio1 = bassdrive;\nconst torontoRadio2 = bassdrive;\n\nclass App extends Component {\n  state = {\n    station,\n    url: bassdrive, //\n    pip: false,\n    playing: false,\n    controls: false,\n    light: false,\n    volume: 0.5,\n    muted: false,\n    played: 0,\n    loaded: 0,\n    duration: 0,\n    playbackRate: 1.0,\n    loop: false,\n    meta: null,\n    currentShow: \"Loom Radio\",\n  };\n  componentDidMount() {}\n  load = (url) => {\n    this.setState({\n      url,\n      played: 0,\n      loaded: 0,\n      pip: false,\n    });\n  };\n  playPause = (event) => {\n    this.setState({ playing: !this.state.playing });\n  };\n  stop = () => {\n    this.setState({ url: null, playing: false });\n  };\n  toggleControls = () => {\n    const url = this.state.url;\n    this.setState(\n      {\n        controls: !this.state.controls,\n        url: null,\n      },\n      () => this.load(url)\n    );\n  };\n  toggleLight = () => {\n    this.setState({ light: !this.state.light });\n  };\n  toggleLoop = () => {\n    this.setState({ loop: !this.state.loop });\n  };\n  setVolume = (e) => {\n    this.setState({ volume: parseFloat(e.target.value) });\n  };\n  toggleMuted = () => {\n    this.setState({ muted: !this.state.muted });\n  };\n  setPlaybackRate = (e) => {\n    this.setState({ playbackRate: parseFloat(e.target.value) });\n  };\n  togglePIP = () => {\n    this.setState({ pip: !this.state.pip });\n  };\n  onSearch = () => {\n    /*\n\n    Need to get googleAPI key and store config on dropbox\n\n    const { meta } = this.state;\n    const cx = \"001416230067881723525:aixpfy93ova\";\n    const query = `${meta.host} drum and bass`;\n    const apiKey = config.googleAPI;\n    const url = `https://www.googleapis.com/customsearch/v1?key=${apiKey}&cx=${cx}&q=${query}`;\n    fetch(url).then(\n      success => {\n        console.log(\"TCL: App -> onSearch -> success\", success);\n      },\n      fail => {}\n    );\n    */\n  };\n\n  fetchMeta = (station) => {\n    const { ownmetadataurl } = station;\n    /*\n    //const url = `https://cors-anywhere.herokuapp.com/${ownmetadataurl}`;\n    const config = {\n      method: \"GET\", // *GET, POST, PUT, DELETE, etc.\n      mode: \"no-cors\", // no-cors, *cors, same-origin\n      cache: \"no-cache\", // *default, no-cache, reload, force-cache, only-if-cached\n      headers: {\n        \"Content-Type\": \"application/json\",\n        // 'Content-Type': 'application/x-www-form-urlencoded',\n        \"X-Requested-With\": \"XMLHttpRequest\",\n      },\n      redirect: \"follow\", // manual, *follow, error\n      referrerPolicy: \"no-referrer\", // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url\n    };\n\n    const res = await fetch(ownmetadataurl, config);\n\n    const reader = await res.body\n      .getReader()\n      .read()\n      .then(({ value, done }) => {\n        console.log(decoder.decode(value));\n        return decoder.decode(value);\n      });\n    console.log(\"yes reader: \", reader);\n    //const json = await response.json();\n    //console.log(\"yes json: \", json);\n    //return json;\n\n    const decoder = new TextDecoder(\"utf-8\");\n\n    response.body\n      .getReader()\n      .read()\n      .then(({ value, done }) => {\n        console.log(decoder.decode(value));\n      });\n    */\n\n    return fetch(ownmetadataurl).then((response) => {\n      response.body\n        .getReader()\n        .read()\n        .then(({ value, done }) => {\n          console.log(decoder.decode(value));\n          const artist = decoder.decode(value);\n          console.log(\"artist: \", artist);\n          return artist;\n        });\n    });\n  };\n\n  onPlay = () => {\n    console.log(\"App onPlay\");\n    const self = this;\n    const { station, url } = this.state;\n\n    const Parser = require(\"icecast-parser\");\n    const radioStation = new Parser(url);\n\n    // \"http://bassdrive.radioca.st/;stream/1\"\n\n    if (station.ownmetadataurl) {\n      this.fetchMeta(station);\n    }\n\n    radioStation.on(\"metadata\", function (metadata) {\n      //Live from NY hosted by Overfiend - special guest SOHLMAN\n      //The Prague Connection June 17th 2019 - hosted by Blofeld\n      const host = metadata.StreamTitle.split(\"by\")[1];\n      const show = metadata.StreamTitle.split(\"hosted\")[0]; // need parse out date\n\n      console.log(\"App onPlay metadata: \", metadata);\n\n      self.setState({ meta: metadata, host, show });\n    });\n\n    radioStation.on(\"end\", function (error) {\n      console.log(\"radioStation ended\");\n    });\n\n    radioStation.on(\"error\", function (error) {\n      console.log(\"radioStation error\", error);\n    });\n\n    radioStation.on(\"empty\", function () {\n      console.log(\"radioStation empty\");\n    });\n\n    radioStation.on(\"stream\", function (stream) {\n      //stream.pipe(process.stdout);\n      console.log(\"radioStation stream \", stream);\n    });\n\n    radioStation.on(\"error\", (error) => {\n      console.log(\"radioStation error \", error);\n    });\n\n    this.setState({ playing: true });\n  };\n  onEnablePIP = () => {\n    console.log(\"onEnablePIP\");\n    this.setState({ pip: true });\n  };\n  onDisablePIP = () => {\n    console.log(\"onDisablePIP\");\n    this.setState({ pip: false });\n  };\n  onPause = () => {\n    console.log(\"onPause\");\n    this.setState({ playing: false });\n  };\n  onSeekMouseDown = (e) => {\n    this.setState({ seeking: true });\n  };\n  onSeekChange = (e) => {\n    this.setState({ played: parseFloat(e.target.value) });\n  };\n  onSeekMouseUp = (e) => {\n    this.setState({ seeking: false });\n    this.player.seekTo(parseFloat(e.target.value));\n  };\n  onProgress = (state) => {\n    console.log(\"onProgress\", state);\n    // We only want to update time slider if we are not currently seeking\n    if (!this.state.seeking) {\n      this.setState(state);\n    }\n  };\n  onEnded = () => {\n    console.log(\"onEnded\");\n    this.setState({ playing: this.state.loop });\n  };\n  onDuration = (duration) => {\n    console.log(\"onDuration\", duration);\n    this.setState({ duration });\n  };\n  onClickFullscreen = () => {\n    // screenfull.request(findDOMNode(this.player));\n  };\n  renderLoadButton = (url, label) => {\n    return <button onClick={() => this.load(url)}>{label}</button>;\n  };\n  ref = (player) => {\n    this.player = player;\n  };\n  renderMeta = (meta) => {\n    if (this.state.playing && this.state.meta) {\n      console.log(\"App meta: \", meta);\n      return (\n        <div className=\"meta\">\n          <button onClick={this.onSearch} className=\"meta-show\">\n            <h2>{this.state.meta.StreamTitle}</h2>\n          </button>\n        </div>\n      );\n    } else if (this.state.currentShow !== \"Loom Radio\") {\n      return <div className=\"meta\">no stream details available</div>;\n    }\n  };\n\n  selectShow = (currentShow) => (e) => {\n    const station = stations.find((station) => station.name === currentShow);\n    const { url } = station;\n\n    this.setState({ currentShow, station, url, meta: null });\n  };\n\n  onErrorHandler = (e) => {\n    console.log(e);\n  };\n\n  onBufferHandler = () => {\n    console.log(\"App handling buffer from FilePlayer\");\n  };\n\n  render() {\n    const {\n      url,\n      playing,\n      controls,\n      light,\n      volume,\n      muted,\n      loop,\n      played,\n      loaded,\n      duration,\n      playbackRate,\n      pip,\n      currentShow,\n    } = this.state;\n    const SEPARATOR = \" · \";\n\n    const min = 0;\n    const max = 1;\n\n    const renderStationButtons = () => {\n      return stations.map((station) => {\n        const { name } = station;\n        return (\n          <button\n            className=\"select-show\"\n            onClick={this.selectShow(name)}\n            key={name}\n          >\n            {name}\n          </button>\n        );\n      });\n    };\n\n    return (\n      <div className=\"loomradio\">\n        <section className=\"section\">\n          {/* <DanceFloor /> */}\n          <div>\n            <img src={loomradioMark} alt=\"loomradio\" />\n          </div>\n          <h1>{currentShow}</h1>\n          <div\n            className=\"player-wrapper\"\n            style={{ display: \"none\", marginBottom: 20 }}\n          >\n            <ReactPlayer\n              ref={this.ref}\n              className=\"react-player\"\n              width=\"100%\"\n              height=\"100%\"\n              url={url}\n              pip={pip}\n              playing={playing}\n              controls={controls}\n              light={light}\n              loop={loop}\n              playbackRate={playbackRate}\n              volume={volume}\n              muted={muted}\n              onReady={() => console.log(\"onReady\")}\n              onStart={() => console.log(\"onStart\")}\n              onPlay={this.onPlay}\n              onEnablePIP={this.onEnablePIP}\n              onDisablePIP={this.onDisablePIP}\n              onPause={this.onPause}\n              onBuffer={this.onBufferHandler}\n              onSeek={(e) => console.log(\"onSeek\", e)}\n              onEnded={this.onEnded}\n              onError={this.onErrorHandler}\n              onProgress={this.onProgress}\n              onDuration={this.onDuration}\n            />\n          </div>\n          {this.renderMeta()}\n          <div\n            style={{\n              display: \"flex\",\n              flexDirection: \"row\",\n              alignItems: \"center\",\n              justifyContent: \"center\",\n              marginBottom: 20,\n            }}\n          >\n            {currentShow !== \"Loom Radio\" && (\n              <button className=\"playBtn animate-in\" onClick={this.playPause}>\n                {playing ? \"Pause\" : \"Play\"}\n              </button>\n            )}\n\n            {currentShow !== \"Loom Radio\" && (\n              <input\n                className=\"InputRange animate-in\"\n                type=\"range\"\n                min={min}\n                max={max}\n                step=\"any\"\n                value={volume}\n                onChange={this.setVolume}\n                style={{\n                  backgroundSize: `${\n                    ((volume - min) / (max - min)) * 100\n                  }% 100%`,\n                }}\n              />\n            )}\n          </div>\n          <div>\n            {renderStationButtons()}\n            {/*\n            <button\n              className=\"select-show\"\n              onClick={this.selectShow(\"CBC Radio 1\")}\n            >\n              CBC Radio 1\n            </button>\n            <button\n              className=\"select-show\"\n              onClick={this.selectShow(\"CBC Radio 2\")}\n            >\n              CBC Radio 2\n            </button>*/}\n          </div>\n          <div>\n            <span style={{ fontSize: 10, color: \"#ddd\" }}>{version}</span>\n          </div>\n        </section>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}