{"ast":null,"code":"var _jsxFileName = \"/Users/braflow/loomradio/src/players/Vimeo.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport { callPlayer, getSDK } from '../utils';\nimport createSinglePlayer from '../singlePlayer';\nconst SDK_URL = 'https://player.vimeo.com/api/player.js';\nconst SDK_GLOBAL = 'Vimeo';\nconst MATCH_URL = /vimeo\\.com\\/.+/;\nconst MATCH_FILE_URL = /vimeo\\.com\\/external\\/.+\\.mp4/;\nexport class Vimeo extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"callPlayer\", callPlayer);\n\n    _defineProperty(this, \"duration\", null);\n\n    _defineProperty(this, \"currentTime\", null);\n\n    _defineProperty(this, \"secondsLoaded\", null);\n\n    _defineProperty(this, \"mute\", () => {\n      this.setVolume(0);\n    });\n\n    _defineProperty(this, \"unmute\", () => {\n      if (this.props.volume !== null) {\n        this.setVolume(this.props.volume);\n      }\n    });\n\n    _defineProperty(this, \"ref\", container => {\n      this.container = container;\n    });\n  }\n\n  load(url) {\n    this.duration = null;\n    getSDK(SDK_URL, SDK_GLOBAL).then(Vimeo => {\n      if (!this.container) return;\n      this.player = new Vimeo.Player(this.container, _objectSpread({\n        url,\n        autoplay: this.props.playing,\n        muted: this.props.muted,\n        loop: this.props.loop,\n        playsinline: this.props.playsinline\n      }, this.props.config.vimeo.playerOptions));\n      this.player.ready().then(() => {\n        const iframe = this.container.querySelector('iframe');\n        iframe.style.width = '100%';\n        iframe.style.height = '100%';\n      }).catch(this.props.onError);\n      this.player.on('loaded', () => {\n        this.props.onReady();\n        this.refreshDuration();\n      });\n      this.player.on('play', () => {\n        this.props.onPlay();\n        this.refreshDuration();\n      });\n      this.player.on('pause', this.props.onPause);\n      this.player.on('seeked', e => this.props.onSeek(e.seconds));\n      this.player.on('ended', this.props.onEnded);\n      this.player.on('error', this.props.onError);\n      this.player.on('timeupdate', ({\n        seconds\n      }) => {\n        this.currentTime = seconds;\n      });\n      this.player.on('progress', ({\n        seconds\n      }) => {\n        this.secondsLoaded = seconds;\n      });\n    }, this.props.onError);\n  }\n\n  refreshDuration() {\n    this.player.getDuration().then(duration => {\n      this.duration = duration;\n    });\n  }\n\n  play() {\n    this.callPlayer('play');\n  }\n\n  pause() {\n    this.callPlayer('pause');\n  }\n\n  stop() {\n    this.callPlayer('unload');\n  }\n\n  seekTo(seconds) {\n    this.callPlayer('setCurrentTime', seconds);\n  }\n\n  setVolume(fraction) {\n    this.callPlayer('setVolume', fraction);\n  }\n\n  setLoop(loop) {\n    this.callPlayer('setLoop', loop);\n  }\n\n  getDuration() {\n    return this.duration;\n  }\n\n  getCurrentTime() {\n    return this.currentTime;\n  }\n\n  getSecondsLoaded() {\n    return this.secondsLoaded;\n  }\n\n  render() {\n    const style = _objectSpread({\n      width: '100%',\n      height: '100%',\n      overflow: 'hidden',\n      backgroundColor: 'black'\n    }, this.props.style);\n\n    return __jsx(\"div\", {\n      key: this.props.url,\n      ref: this.ref,\n      style: style,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 7\n      }\n    });\n  }\n\n}\n\n_defineProperty(Vimeo, \"displayName\", 'Vimeo');\n\n_defineProperty(Vimeo, \"canPlay\", url => {\n  if (MATCH_FILE_URL.test(url)) {\n    return false;\n  }\n\n  return MATCH_URL.test(url);\n});\n\nexport default createSinglePlayer(Vimeo);","map":{"version":3,"sources":["/Users/braflow/loomradio/src/players/Vimeo.js"],"names":["React","Component","callPlayer","getSDK","createSinglePlayer","SDK_URL","SDK_GLOBAL","MATCH_URL","MATCH_FILE_URL","Vimeo","setVolume","props","volume","container","load","url","duration","then","player","Player","autoplay","playing","muted","loop","playsinline","config","vimeo","playerOptions","ready","iframe","querySelector","style","width","height","catch","onError","on","onReady","refreshDuration","onPlay","onPause","e","onSeek","seconds","onEnded","currentTime","secondsLoaded","getDuration","play","pause","stop","seekTo","fraction","setLoop","getCurrentTime","getSecondsLoaded","render","overflow","backgroundColor","ref","test"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\n\nimport { callPlayer, getSDK } from '../utils'\nimport createSinglePlayer from '../singlePlayer'\n\nconst SDK_URL = 'https://player.vimeo.com/api/player.js'\nconst SDK_GLOBAL = 'Vimeo'\nconst MATCH_URL = /vimeo\\.com\\/.+/\nconst MATCH_FILE_URL = /vimeo\\.com\\/external\\/.+\\.mp4/\n\nexport class Vimeo extends Component {\n  static displayName = 'Vimeo'\n  static canPlay = url => {\n    if (MATCH_FILE_URL.test(url)) {\n      return false\n    }\n    return MATCH_URL.test(url)\n  }\n\n  callPlayer = callPlayer\n  duration = null\n  currentTime = null\n  secondsLoaded = null\n  load (url) {\n    this.duration = null\n    getSDK(SDK_URL, SDK_GLOBAL).then(Vimeo => {\n      if (!this.container) return\n      this.player = new Vimeo.Player(this.container, {\n        url,\n        autoplay: this.props.playing,\n        muted: this.props.muted,\n        loop: this.props.loop,\n        playsinline: this.props.playsinline,\n        ...this.props.config.vimeo.playerOptions\n      })\n      this.player.ready().then(() => {\n        const iframe = this.container.querySelector('iframe')\n        iframe.style.width = '100%'\n        iframe.style.height = '100%'\n      }).catch(this.props.onError)\n      this.player.on('loaded', () => {\n        this.props.onReady()\n        this.refreshDuration()\n      })\n      this.player.on('play', () => {\n        this.props.onPlay()\n        this.refreshDuration()\n      })\n      this.player.on('pause', this.props.onPause)\n      this.player.on('seeked', e => this.props.onSeek(e.seconds))\n      this.player.on('ended', this.props.onEnded)\n      this.player.on('error', this.props.onError)\n      this.player.on('timeupdate', ({ seconds }) => {\n        this.currentTime = seconds\n      })\n      this.player.on('progress', ({ seconds }) => {\n        this.secondsLoaded = seconds\n      })\n    }, this.props.onError)\n  }\n  refreshDuration () {\n    this.player.getDuration().then(duration => {\n      this.duration = duration\n    })\n  }\n  play () {\n    this.callPlayer('play')\n  }\n  pause () {\n    this.callPlayer('pause')\n  }\n  stop () {\n    this.callPlayer('unload')\n  }\n  seekTo (seconds) {\n    this.callPlayer('setCurrentTime', seconds)\n  }\n  setVolume (fraction) {\n    this.callPlayer('setVolume', fraction)\n  }\n  setLoop (loop) {\n    this.callPlayer('setLoop', loop)\n  }\n  mute = () => {\n    this.setVolume(0)\n  }\n  unmute = () => {\n    if (this.props.volume !== null) {\n      this.setVolume(this.props.volume)\n    }\n  }\n  getDuration () {\n    return this.duration\n  }\n  getCurrentTime () {\n    return this.currentTime\n  }\n  getSecondsLoaded () {\n    return this.secondsLoaded\n  }\n  ref = container => {\n    this.container = container\n  }\n  render () {\n    const style = {\n      width: '100%',\n      height: '100%',\n      overflow: 'hidden',\n      backgroundColor: 'black',\n      ...this.props.style\n    }\n    return (\n      <div\n        key={this.props.url}\n        ref={this.ref}\n        style={style}\n      />\n    )\n  }\n}\n\nexport default createSinglePlayer(Vimeo)\n"]},"metadata":{},"sourceType":"module"}